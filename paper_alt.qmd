---
title: "Breaking Free from the Xpt: Exploration of dataset.json as an Alternative Transport File to Regulatory Agencies"
subtitle: 
    Ben Straub, GSK, Philadelphia, United States <br>
    Sam Parmar, Pfizer, New York City, United States <br>
    Nick Masel, Johnson and Johnson
format: docx
editor: source
---

## ABSTRACT

The SAS XPORT (XPT) transport file has been the de facto interchange format for SDTM and ADaM datasets in regulatory submissions for decades. While durable and widely supported, XPT is inherently constrained by legacy design decisions and is not a natural “first choice” format within modern open-source data ecosystems. The CDISC Dataset-JSON standard provides a contemporary alternative designed to represent clinical datasets and metadata using JavaScript Object Notation (JSON), enabling straightforward interaction across many programming languages and validation toolchains.

R Consortium R Submission Pilot 5 explored a fully reproducible, publicly accessible submission-like package centered on **R-generated ADaM datasets** and delivery of datasets in **Dataset-JSON v1.1**. The pilot demonstrates (1) converting study data inputs into analysis-ready datasets, (2) serializing datasets to Dataset-JSON using R, (3) regenerating key tables/figures from the R-derived datasets, and (4) implementing quality control comparisons to support confidence that the artifacts match expectations and prior baselines.

This paper summarizes the Pilot 5 approach, highlights practical implementation details (conversion, metadata/labels, eCTD-style packaging), and outlines lessons learned for teams evaluating Dataset-JSON as a viable alternative transport format for future submissions.

## INTRODUCTION

### WHY TALK ABOUT TRANSPORT FILES?

Transport formats are often treated as a solved problem: “we make SDTM/ADaM, we write XPT, we submit.” In practice, transport format decisions influence far more than the final “write step.” They affect:

- how metadata travels with the dataset,
- how frictionless it is to use non-SAS tooling,
- how easy it is to automate checks and spot unintended changes,
- how feasible it is to support reproducibility and transparent review in modern workflows.

Dataset-JSON is interesting not because JSON is trendy, but because it is *ubiquitous* and enables a submission package to be interacted with by a wider technical ecosystem. Pilot 5 uses that premise to test a practical question: **can an R-based submission package meet reviewer expectations while delivering core datasets as Dataset-JSON?**

## WHAT IS R SUBMISSION PILOT 5?

Per the project overview, Pilot 5 objectives include:

1. Deliver a **publicly accessible** R-based submission through an eCTD-style organization using Dataset-JSON.
2. Expand prior pilot work by using R to generate **ADaM datasets** (not just reusing existing ADaM).

This pilot is an FDA–industry collaboration through the R Consortium and the R Submissions Working Group, and all code/materials are publicly available:

- Development repo: https://github.com/RConsortium/submissions-pilot5-datasetjson  
- (Referenced packaging repo) eCTD materials: https://github.com/RConsortium/submissions-pilot5-datasetjson-to-fda  
- eCTD README overview in this repo: `ectd_readme/README.qmd`

## A “WALK THE PACKAGE” VIEW (WHAT’S ACTUALLY IN THE REPO)

Pilot 5 is valuable because it is not a toy example; it is structured like a submission artifact you can actually run and inspect.

### 1) eCTD-style packaging and deliverables

The `ectd_readme/README.qmd` describes an eCTD-like folder organization and explicitly calls out that Module 5 includes analysis deliverables, datasets, and programs. It also illustrates how Dataset-JSON datasets (e.g., `adsl.json`, `adae.json`, etc.) can sit alongside programs and reviewer documentation (e.g., ADRG).

This matters because one practical barrier to “new formats” is not the file output itself—it’s how the submission is packaged, navigated, and reviewed.

### 2) R-generated ADaM datasets

Pilot 5 includes R programs to create ADaM datasets (for example in `pilot5-submission/pilot5-programs/`), including:

- `adsl.r`
- `adae.r`
- `adlbc.r`
- `adtte.r`

These programs implement typical ADaM derivations and apply variable ordering, labels, controlled terminology checks, and dataset-level labeling intended to align with expectations from define.xml-driven review.

### 3) Creating Dataset-JSON deliverables in R

Pilot 5 demonstrates conversion workflows using the `{datasetjson}` R package. One illustrative example is:

- `pilot5-submission/pilot5-programs/convert_xpt_to_datasetjson.r`

This script shows a pattern that is important for real use:
- read an input dataset (e.g., from XPT),
- ensure dataset label/metadata are present,
- build column metadata,
- write out Dataset-JSON with attention to numeric precision (e.g., `float_as_decimals = TRUE`).

### 4) Reproducibility: tables/figures regenerated from R artifacts

Pilot 5 also includes work to regenerate outputs (TLFs) using the R-built datasets (for example: `pilot5-submission/pilot5-programs/pilot5-cmb-report-manual.qmd`). This helps demonstrate that the analysis pipeline remains executable and reviewable when the underlying transport format is JSON.

### 5) Quality control: prove you didn’t change the science

Pilot 5 includes QC reports to compare:
- datasets to a prior baseline (Pilot 3 / earlier artifacts): `qcReport.qmd`
- output artifacts (including text and image-type comparisons): `tlf-qc.qmd`

## MINI EXAMPLE: FROM AN ADAM DATA FRAME TO DATASET-JSON

This section provides a minimal illustration of how Dataset-JSON can be produced in R in the same spirit as the Pilot 5 workflow. The primary goal is to show (a) how dataset-level metadata is attached and (b) how column metadata is captured, in a way that is explicit and scriptable.

In Pilot 5, conversion logic is encapsulated in scripts such as `pilot5-submission/pilot5-programs/convert_xpt_to_datasetjson.r`, which reads XPT, ensures labels are present, derives metadata, and writes Dataset-JSON.

Below is a simplified “toy” example that mirrors the concept (using a small in-memory dataset).

```{r}
#| eval: false
library(datasetjson)
library(tibble)
library(dplyr)

# Example "ADaM-like" dataset
adsl <- tibble(
  STUDYID = "CDISCPILOT01",
  USUBJID = c("01-701-1015", "01-701-1023"),
  TRT01A  = c("Placebo", "Xanomeline Low Dose"),
  AGE     = c(67, 72)
)

# Attach a dataset label (Pilot 5 ensures labels exist; when reading XPT
# this may come from define.xml / transport attributes)
attr(adsl, "label") <- "Subject-Level Analysis Dataset"

# Minimal column metadata for datasetjson::dataset_json()
# Pilot 5 derives metadata more comprehensively (types, lengths, formats, etc.)
columns <- tibble(
  name = names(adsl),
  label = c("Study Identifier", "Unique Subject Identifier", "Actual Treatment for Period 01", "Age"),
  dataType = c("text", "text", "text", "integer")
)

ds_json <- datasetjson::dataset_json(
  adsl,
  item_oid = "ADSL",
  name = "adsl",
  dataset_label = attr(adsl, "label"),
  columns = columns
)

# Write the Dataset-JSON (string)
json_text <- datasetjson::write_dataset_json(ds_json)

# If desired, write to file:
# writeLines(json_text, "adsl.json")
```

Although minimal, two design points are worth calling out:

- **Dataset-JSON encourages explicit metadata handling.** Rather than relying solely on a transport container format, the workflow foregrounds dataset labels and column metadata as objects you can generate, audit, and version-control.
- **This fits naturally into reproducible pipelines.** In Pilot 5, dataset creation, serialization, output generation, and QC reporting are all scripted and can be rerun end-to-end.

## CONCLUSION

R Consortium R Submission Pilot 5 provides a concrete, public example demonstrating that Dataset-JSON can be used as a realistic alternative transport format in a submission-like package while maintaining reproducibility and reviewability. Specifically, the pilot shows:

- ADaM datasets can be derived in R using transparent, inspectable programs.
- Those datasets can be serialized to **Dataset-JSON v1.1** using a scripted approach.
- Outputs can be regenerated from the R-derived datasets.
- QC comparisons can be executed and reported to support confidence in fidelity relative to prior baselines.

The overarching lesson is not that XPT should be immediately replaced everywhere, but that **Dataset-JSON is operationally viable** when paired with (a) robust metadata practices, (b) explicit reviewer-facing package structure, and (c) automation for comparability checks. Pilot 5 provides a reference implementation that teams can adapt as regulators and industry continue to evaluate modern submission artifacts.

## REFERENCES

R Consortium R Submission Pilot 5 development repository. (2025). GitHub.  
https://github.com/RConsortium/submissions-pilot5-datasetjson

FDA Electronic Common Technical Document (eCTD) overview. (n.d.). U.S. Food and Drug Administration.  
https://www.fda.gov/drugs/electronic-regulatory-submission-and-review/electronic-common-technical-document-ectd

CDISC Dataset-JSON standard (v1.1). (Referenced in Pilot 5 ADRG “Study Data Standards and Dictionary Inventory”.)

CDISC SDTM & ADaM Pilot Project (CDISCPilot01 source materials). (n.d.). GitHub.  
https://github.com/cdisc-org/sdtm-adam-pilot-project

## RECOMMENDED READING

Pilot 5 ADRG preview (public links referenced by the Pilot 5 repo README):

- HTML: https://rpodcast.quarto.pub/pilot-5-aanalysis-data-reviewers-guide/  
- PDF: https://rsubmission-draft.us-east-1.linodeobjects.com/pilot5-adrg-quarto-pdf.pdf

Pilot 5 eCTD package overview (in-repo Quarto source):  
https://github.com/RConsortium/submissions-pilot5-datasetjson/blob/main/ectd_readme/README.qmd

QC reports in the Pilot 5 repo (for dataset and output comparisons):  
- `qcReport.qmd`  
- `tlf-qc.qmd`

## ACKNOWLEDGMENTS

The authors acknowledge the work of the **R Consortium** and the **R Submissions Working Group**, as well as the broader set of contributors who made the Pilot 5 repository, documentation, and reproducible workflows publicly available for the benefit of regulators, industry, and the open-source community.

## CONTACT INFORMATION

Ben Straub  
GSK  
Philadelphia, United States  

Sam Parmar  
Pfizer  
New York City, United States  

Nick Masel  
Johnson and Johnson  
(complete location and email as applicable)

Brand and product names are trademarks of their respective companies.